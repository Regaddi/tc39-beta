<article>
  <h2 id="proposals" class="section-headline text-end">State of Proposals</h2>
  <div class="featurelist">
    <h3>Current Candidates for the Specification</h3>
    <i class="featurelist__desc">
      This section features proposals that are in Stage 3 of <a href="https://tc39.es/process-document/">our process</a>, which means they are close to completion.
    </i>
    <details class="featurelist__legend">
      <summary><strong>How to read the proposals list</strong></summary>
      <p>
      Each proposal has links out to other resources. The tags identify the following attributes.
      Below you will find a table with example tags and their meanings.
      All tags have hover text if you need help getting oriented.
      </p>

      <strong>Types of tags and what they mean</strong>
      <ul class="featurelist__legend__tags">
          <li>Last Presented:
            <div class="featurelist__item__presented featurelist__item__tag">
              <a title="Notes from most recent presentation">December 2018</a>
            </div>
          </li>
          <li>Available Tests:
            <div class="featurelist__item__tests featurelist__item__tag">
              <a title="Patch introducing tests in test262 repository">Test</a>
            </div>
          </li>
          <li>Specification Text:
            <div class="featurelist__item__spec featurelist__item__tag">
              <a title="Read the specification text">Specification</a>
            </div>
          </li>
      </ul>
    </details>
    {% for proposal in site.data.stage3 %}
      <article class="featurelist__item">
        <div class="featurelist__item__intro">
          <header class="g-row">
            <h4 class="featurelist__item__title flex-grow">
              <a href="https://github.com/tc39/{{ proposal.id }}">{{ proposal.title }}</a>
            </h4>
            <div class="featurelist__item__tags">
              <ul class="featurelist__item__status featurelist__item__tags">
                {% if proposal.presented | size %}
                {% for presentation in proposal.presented %}
                  <li class="featurelist__item__presented featurelist__item__tag">
                    <a href="{{ presentation.url }}" title="Notes from most recent presentation">{{ presentation.date }}</a>
                  </li>
                {% endfor %}
                {% endif %}
                {% if proposal.tests | size %}
                {% for url in proposal.tests %}
                  <li class="featurelist__item__tests featurelist__item__tag">
                    <a href="{{ url }}" title="Patch introducing tests in test262 repository">Test</a>
                  </li>
                {% endfor %}
                {% endif %}
                {% if proposal.has_specification %}
                  <li class="featurelist__item__spec featurelist__item__tag">
                    <a href="https://tc39.es/{{ proposal.id }}" title="Read the specification text">Specification</a>
                  </li>
                {% endif %}
              </ul>
            </div>
          </header>
          <div class="featurelist__item__author">
            {% if proposal.authors == proposal.champions %}
              Author and Champion:
              {{ proposal.authors | join: ", " }}
            {% else %}
              {% if proposal.authors | size %}
              {% if proposal.authors.size > 1 %}
              Authors:
              {% else %}
              Author:
              {% endif %}
              {{ proposal.authors | join: ", " }}
              {% endif %}
              {% if proposal.champions | size %}
              |
              {% if proposal.champions.size > 1 %}
              Champions:
              {% else %}
              Champion:
              {% endif %}
              {{ proposal.champions | join: ", " }}
              {% endif %}
            {% endif %}
          </div>
          {% if proposal.description %}
          <div class="featurelist__item__desc">{{ proposal.description }}</div>
          {% endif %}
          {% if proposal.example %}
          <div
            class="featurelist__item__example"
            aria-controls="example-{{ proposal.id }}"
            aria-expanded="false"
            tabindex="0"
            id="example-toggle-{{ proposal.id }}"
            aria-selected="false"
          >
            Show Example
          </div>
          {% endif %}
          <section
            class="featurelist__item__info"
            id="example-{{ proposal.id }}"
            role="region"
            aria-hidden="true"
            aria-labelledby="example-toggle-{{ proposal.id }}"
          >
            {% if proposal.example %}
              <div>
                <div>
                  <pre><code class="js" tabindex="-1">{{ proposal.example }}</code></pre>
                </div>
              </div>
            {% endif %}
          </div>
        </section>
      </article>
    {% endfor %}
  </div>
  <section class="featurelist__more">
    <a href="https://github.com/tc39/proposals">
      See proposals in all stages
    </a>
  </section>
</section>
